# Top-level Hydra training configuration
defaults:
  - model/audio_encoder
  - model/onset
  - model/sequence
  - model/lighting
  - data/default

# Training
stage: onset  # onset | sequence | lighting
max_epochs: 100
accelerator: gpu
devices: 1
precision: bf16-mixed
accumulate_grad_batches: 1  # increase to simulate larger batch with less VRAM
low_priority: false  # set true when gaming â€” runs at BELOW_NORMAL CPU priority

# Optimizer
optimizer:
  name: adamw
  learning_rate: 0.0003
  weight_decay: 0.01
  betas: [0.9, 0.999]

# Scheduler
scheduler:
  name: cosine
  warmup_steps: 1000

# Checkpointing
checkpoint:
  monitor: val_f1
  mode: max
  save_top_k: 3
  save_last: true

# Logging
logger:
  name: tensorboard  # tensorboard | wandb
  project: beatsaber_automapper

# Paths (resolved relative to the project root, not Hydra's run dir)
data_dir: data/processed
output_dir: outputs

# Keep CWD at the project root so relative paths (data_dir, output_dir) work correctly
hydra:
  job:
    chdir: false
